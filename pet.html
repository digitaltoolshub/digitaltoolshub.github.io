<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Accurate pet cost calculator for dogs, cats, birds, fish, reptiles and more. Get personalized monthly expense estimates based on breed, age, lifestyle and location.">
    <meta name="keywords" content="pet cost calculator, dog expenses, cat budget, bird care costs, reptile ownership costs, fish tank maintenance, pet budget planner, pet financial planning">
    <meta name="author" content="Ultimate Pet Cost Analyzer">
    <meta property="og:title" content="Ultimate Pet Cost Analyzer | Accurate Pet Ownership Calculator">
    <meta property="og:description" content="Calculate accurate monthly costs for any pet based on type, breed, lifestyle and location with our comprehensive pet expense calculator.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://petcostanalyzer.com">
    <meta property="og:image" content="https://petcostanalyzer.com/images/pet-cost-social-share.jpg">
    <meta property="og:site_name" content="Ultimate Pet Cost Analyzer">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Ultimate Pet Cost Analyzer">
    <meta name="twitter:description" content="Calculate accurate pet ownership costs for any animal with our comprehensive calculator.">
    <meta name="twitter:image" content="https://petcostanalyzer.com/images/pet-cost-social-share.jpg">
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Ultimate Pet Cost Analyzer",
      "url": "https://petcostanalyzer.com",
      "description": "Comprehensive pet ownership cost calculator for all types of animals",
      "applicationCategory": "FinanceApplication",
      "operatingSystem": "Web Browser"
    }
    </script>
    <title>Ultimate Pet Cost Analyzer | Global Pet Expense Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Fredoka+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="manifest" href="/manifest.json">
    <style>
        :root {
            --primary: #6c5ce7;
            --primary-light: #a29bfe;
            --secondary: #00cec9;
            --accent: #fd79a8;
            --accent-light: #ffb8c6;
            --light: #f8f9fa;
            --light-gray: #e0e0e0;
            --dark: #2d3436;
            --dark-gray: #636e72;
            --success: #00b894;
            --success-light: #55efc4;
            --warning: #fdcb6e;
            --warning-light: #ffeaa7;
            --danger: #d63031;
            --danger-light: #ff7675;
            --info: #0984e3;
            --info-light: #74b9ff;
            --luxury: #e84393;
            --luxury-light: #fd79a8;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #dfe6e9 100%);
            color: var(--dark);
            min-height: 100vh;
            padding: 20px;
            background-attachment: fixed;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 1s;
            position: relative;
        }

        .header-bg {
            position: absolute;
            top: -50px;
            left: 0;
            right: 0;
            height: 300px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            z-index: -1;
            clip-path: ellipse(100% 60% at 50% 30%);
            opacity: 0.1;
        }

        h1 {
            font-size: 3rem;
            color: var(--dark);
            margin-bottom: 10px;
            font-family: 'Fredoka One', cursive;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            letter-spacing: 1px;
        }

        .subtitle {
            font-size: 1.3rem;
            color: var(--dark-gray);
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .pet-icon-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 30px 0;
        }

        .pet-icon {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--primary);
        }

        .pet-icon:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
            background: var(--primary);
            color: white;
        }

        .pet-icon.active {
            background: var(--primary);
            color: white;
            transform: scale(1.1);
        }

        .pet-analyzer {
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-bottom: 40px;
            animation: fadeInUp 1s;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .pet-analyzer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
        }

        .pet-analyzer:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
        }

        /* Tab system */
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--light-gray);
        }

        .tab {
            padding: 12px 25px;
            cursor: pointer;
            font-weight: 600;
            color: var(--dark-gray);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab:hover {
            color: var(--primary);
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 25px;
            position: relative;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark);
            font-size: 1.05rem;
        }

        select, input, textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--light-gray);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s;
            background-color: #f8f9fa;
            appearance: none;
            font-family: 'Poppins', sans-serif;
        }

        select {
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%236c5ce7' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 15px;
        }

        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(108, 92, 231, 0.2);
            background-color: white;
        }

        .btn {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(108, 92, 231, 0.4);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, var(--secondary), var(--primary));
            opacity: 0;
            transition: opacity 0.3s;
            z-index: -1;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(108, 92, 231, 0.5);
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
            box-shadow: none;
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
            box-shadow: 0 5px 20px rgba(108, 92, 231, 0.4);
        }

        .btn-lg {
            padding: 18px 35px;
            font-size: 1.2rem;
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .results {
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-top: 30px;
            display: none;
            animation: fadeIn 1s;
            position: relative;
            overflow: hidden;
        }

        .results::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(to right, var(--success), var(--info));
        }

        .results h2 {
            color: var(--dark);
            margin-bottom: 30px;
            text-align: center;
            font-size: 2rem;
            font-family: 'Fredoka One', cursive;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .cost-breakdown {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-bottom: 40px;
            gap: 15px;
        }

        .cost-item {
            flex: 1;
            min-width: 180px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
            border: 1px solid rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .cost-item::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary);
        }

        .cost-item:nth-child(1)::after { background: var(--primary); }
        .cost-item:nth-child(2)::after { background: var(--success); }
        .cost-item:nth-child(3)::after { background: var(--accent); }
        .cost-item:nth-child(4)::after { background: var(--warning); }
        .cost-item:nth-child(5)::after { background: var(--info); }

        .cost-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .cost-item h3 {
            color: var(--dark-gray);
            font-size: 1rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .cost-item p {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
            margin: 0;
        }

        .total-cost {
            text-align: center;
            margin: 40px 0;
            padding: 30px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 15px;
            color: white;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(108, 92, 231, 0.4);
        }

        .total-cost::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(30deg);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) rotate(30deg); }
            100% { transform: translateX(100%) rotate(30deg); }
        }

        .total-cost h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            position: relative;
        }

        .total-cost p {
            font-size: 3.5rem;
            font-weight: 700;
            margin: 0;
            font-family: 'Fredoka One', cursive;
            position: relative;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .chart-container {
            margin-top: 50px;
            height: 400px;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .pet-image {
            text-align: center;
            margin: 30px 0;
        }

        .pet-image img {
            max-width: 220px;
            border-radius: 50%;
            border: 8px solid white;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
            transition: all 0.3s;
        }

        .pet-image img:hover {
            transform: rotate(5deg) scale(1.05);
        }

        .lifestyle-options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 25px;
        }

        .lifestyle-option {
            flex: 1;
            min-width: 150px;
        }

        .lifestyle-option input {
            display: none;
        }

        .lifestyle-option label {
            display: block;
            padding: 20px 15px;
            background: #f8f9fa;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #e0e0e0;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .lifestyle-option label::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--light-gray);
            transition: all 0.3s;
        }

        .lifestyle-option input:checked + label {
            background: white;
            border-color: var(--primary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: translateY(-3px);
        }

        .lifestyle-option input:checked + label::after {
            background: var(--primary);
        }

        #basic:checked + label {
            border-color: var(--success);
        }
        #basic:checked + label::after {
            background: var(--success);
        }

        #standard:checked + label {
            border-color: var(--info);
        }
        #standard:checked + label::after {
            background: var(--info);
        }

        #premium:checked + label {
            border-color: var(--warning);
        }
        #premium:checked + label::after {
            background: var(--warning);
        }

        #luxury:checked + label {
            border-color: var(--luxury);
        }
        #luxury:checked + label::after {
            background: var(--luxury);
        }

        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
            cursor: help;
            color: var(--primary);
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background-color: var(--dark);
            color: #fff;
            text-align: center;
            border-radius: 10px;
            padding: 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
            font-weight: normal;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--dark) transparent transparent transparent;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 30px 0;
        }

        .spinner {
            width: 60px;
            height: 60px;
            margin: 0 auto 20px;
            border: 5px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 5px solid var(--primary);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .country-flag {
            width: 20px;
            height: 15px;
            margin-right: 8px;
            vertical-align: middle;
            border-radius: 2px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }

        footer {
            text-align: center;
            margin-top: 60px;
            color: var(--dark-gray);
            opacity: 0.8;
            font-size: 0.95rem;
            padding: 20px;
        }

        .feature-highlights {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 40px 0;
            justify-content: center;
        }

        .feature {
            flex: 1;
            min-width: 250px;
            max-width: 300px;
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }

        .feature:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .feature i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .feature h3 {
            margin-bottom: 10px;
            color: var(--dark);
        }

        .feature p {
            color: var(--dark-gray);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .share-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .share-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .share-btn:hover {
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .facebook { background: #3b5998; }
        .twitter { background: #1da1f2; }
        .instagram { background: linear-gradient(45deg, #405de6, #5851db, #833ab4, #c13584, #e1306c, #fd1d1d); }
        .pinterest { background: #e60023; }

        /* New Features Styles */
        .gamification-badge {
            display: inline-block;
            background: linear-gradient(to right, var(--warning), var(--danger));
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
            vertical-align: middle;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .compare-section {
            background: var(--light);
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
            text-align: center;
        }

        .compare-result {
            font-size: 1.2rem;
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .video-generator {
            text-align: center;
            margin: 30px 0;
        }

        .video-preview {
            width: 100%;
            max-width: 400px;
            height: 200px;
            background: var(--light-gray);
            border-radius: 10px;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .video-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-preview-text {
            position: absolute;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 0 2px 5px rgba(0,0,0,0.5);
            text-align: center;
            padding: 20px;
        }

        .ai-advice {
            background: var(--light);
            border-radius: 15px;
            padding: 20px;
            margin: 30px 0;
        }

        .ai-response {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid var(--primary);
        }

        .analytics-section {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 30px 0;
        }

        .analytics-card {
            flex: 1;
            min-width: 250px;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .quiz-container {
            background: linear-gradient(135deg, var(--primary-light) 0%, var(--accent-light) 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            color: white;
        }

        .quiz-question {
            font-size: 1.2rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            background: rgba(255,255,255,0.3);
        }

        .quiz-result {
            text-align: center;
            margin-top: 30px;
            display: none;
        }

        .pet-mascot {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 100px;
            height: 100px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 1000;
        }

        .pet-mascot:hover {
            transform: scale(1.1);
        }

        .testimonial {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .testimonial-author {
            font-weight: bold;
            margin-top: 10px;
            display: flex;
            align-items: center;
        }

        .testimonial-author img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .insurance-comparison {
            margin: 30px 0;
        }

        .insurance-option {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .insurance-logo {
            width: 80px;
            height: auto;
            margin-right: 15px;
        }

        /* Resources section */
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .resource-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }

        .resource-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .resource-card h3 {
            margin-bottom: 10px;
            color: var(--primary);
        }

        .resource-card p {
            color: var(--dark-gray);
            margin-bottom: 15px;
            font-size: 0.95rem;
        }

        .resource-card a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .resource-card a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .cost-breakdown, .lifestyle-options {
                flex-direction: column;
            }
            
            .cost-item {
                margin: 10px 0;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .subtitle {
                font-size: 1.1rem;
            }
            
            .pet-analyzer, .results {
                padding: 25px;
            }
            
            .total-cost p {
                font-size: 2.5rem;
            }

            .pet-mascot {
                width: 70px;
                height: 70px;
                bottom: 10px;
                right: 10px;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                flex: 1;
                min-width: 120px;
                text-align: center;
                padding: 10px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-bg"></div>
            <h1 class="animate__animated animate__fadeInDown">Ultimate Pet Cost Analyzer</h1>
            <p class="subtitle animate__animated animate__fadeIn animate__delay-1s">
                Get accurate monthly expense estimates for any pet worldwide with real-time pricing data and personalized lifestyle options
            </p>
            
            <div class="pet-icon-container animate__animated animate__fadeIn animate__delay-1s">
                <div class="pet-icon" data-pet="dog"><i class="fas fa-dog"></i></div>
                <div class="pet-icon" data-pet="cat"><i class="fas fa-cat"></i></div>
                <div class="pet-icon" data-pet="bird"><i class="fas fa-dove"></i></div>
                <div class="pet-icon" data-pet="fish"><i class="fas fa-fish"></i></div>
                <div class="pet-icon" data-pet="reptile"><i class="fas fa-dragon"></i></div>
                <div class="pet-icon" data-pet="small-mammal"><i class="fas fa-otter"></i></div>
                <div class="pet-icon" data-pet="exotic"><i class="fas fa-spider"></i></div>
                <div class="pet-icon" data-pet="farm"><i class="fas fa-horse"></i></div>
                <div class="pet-icon" data-pet="amphibian"><i class="fas fa-frog"></i></div>
            </div>
        </header>

        <div class="feature-highlights">
            <div class="feature animate__animated animate__fadeInUp animate__delay-1s">
                <i class="fas fa-globe-americas"></i>
                <h3>Global Pricing</h3>
                <p>Accurate cost estimates tailored to your country with real-time currency conversion</p>
            </div>
            <div class="feature animate__animated animate__fadeInUp animate__delay-1.2s">
                <i class="fas fa-paw"></i>
                <h3>100+ Pets</h3>
                <p>From common cats to exotic tarantulas - we cover all pet types with detailed breed info</p>
            </div>
            <div class="feature animate__animated animate__fadeInUp animate__delay-1.4s">
                <i class="fas fa-crown"></i>
                <h3>Lifestyle Options</h3>
                <p>Calculate costs for basic care or luxury pampering with our tiered lifestyle system</p>
            </div>
        </div>

        <!-- Tab System -->
        <div class="tabs">
            <div class="tab active" data-tab="calculator">Cost Calculator</div>
            <div class="tab" data-tab="comparison">Pet Comparisons</div>
            <div class="tab" data-tab="resources">Pet Care Resources</div>
        </div>

        <!-- Calculator Tab -->
        <div class="tab-content active" id="calculator-tab">
            <div class="pet-analyzer animate__animated animate__fadeInUp animate__delay-1s">
                <div class="form-group">
                    <label for="pet-type">Pet Type <span class="tooltip"><i class="fas fa-info-circle"></i>
                        <span class="tooltiptext">Select the type of pet you own or plan to own. We cover all major pet categories from dogs to exotic animals.</span>
                    </span></label>
                    <select id="pet-type">
                        <option value="">-- Select Pet Type --</option>
                        <option value="dog">Dog</option>
                        <option value="cat">Cat</option>
                        <option value="bird">Bird</option>
                        <option value="fish">Fish</option>
                        <option value="reptile">Reptile</option>
                        <option value="small-mammal">Small Mammal</option>
                        <option value="exotic">Exotic Pet</option>
                        <option value="farm">Farm Animal</option>
                        <option value="amphibian">Amphibian</option>
                        <option value="invertebrate">Invertebrate</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="form-group" id="breed-group" style="display: none;">
                    <label for="pet-breed">Breed/Type <span class="tooltip"><i class="fas fa-info-circle"></i>
                        <span class="tooltiptext">Select the specific breed or type of your pet. Costs vary significantly between breeds.</span>
                    </span></label>
                    <select id="pet-breed">
                        <option value="">-- Select Breed/Type --</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="pet-age">Pet Age <span class="tooltip"><i class="fas fa-info-circle"></i>
                        <span class="tooltiptext">Younger pets may have higher initial costs, older pets may have higher medical costs. Select the appropriate age range.</span>
                    </span></label>
                    <select id="pet-age">
                        <option value="young">Young (0-1 year)</option>
                        <option value="adult" selected>Adult (1-7 years)</option>
                        <option value="senior">Senior (7+ years)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Lifestyle <span class="tooltip"><i class="fas fa-info-circle"></i>
                        <span class="tooltiptext">Select the lifestyle you plan to provide for your pet. This dramatically affects costs from basic necessities to luxury care.</span>
                    </span></label>
                    <div class="lifestyle-options">
                        <div class="lifestyle-option">
                            <input type="radio" id="basic" name="lifestyle" value="basic" checked>
                            <label for="basic"><i class="fas fa-home"></i> Basic Care</label>
                        </div>
                        <div class="lifestyle-option">
                            <input type="radio" id="standard" name="lifestyle" value="standard">
                            <label for="standard"><i class="fas fa-star"></i> Standard</label>
                        </div>
                        <div class="lifestyle-option">
                            <input type="radio" id="premium" name="lifestyle" value="premium">
                            <label for="premium"><i class="fas fa-gem"></i> Premium</label>
                        </div>
                        <div class="lifestyle-option">
                            <input type="radio" id="luxury" name="lifestyle" value="luxury">
                            <label for="luxury"><i class="fas fa-crown"></i> Luxury</label>
                        </div>
                    </div>
                </div>

                <div class="form-group" id="size-group">
                    <label for="pet-size">Size <span class="tooltip"><i class="fas fa-info-circle"></i>
                        <span class="tooltiptext">Larger pets typically have higher food and care costs. Select the appropriate size category.</span>
                    </span></label>
                    <select id="pet-size">
                        <option value="small">Small (under 20 lbs / 9 kg)</option>
                        <option value="medium" selected>Medium (20-50 lbs / 9-23 kg)</option>
                        <option value="large">Large (50-100 lbs / 23-45 kg)</option>
                        <option value="xlarge">Extra Large (100+ lbs / 45+ kg)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="location">Your Country <span class="tooltip"><i class="fas fa-info-circle"></i>
                        <span class="tooltiptext">Prices vary significantly by country due to local costs. Select your country for accurate estimates.</span>
                    </span></label>
                    <select id="location">
                        <optgroup label="North America">
                            <option value="us" data-flag="us">United States</option>
                            <option value="ca" data-flag="ca">Canada</option>
                            <option value="mx" data-flag="mx">Mexico</option>
                        </optgroup>
                        <optgroup label="Europe">
                            <option value="uk" data-flag="gb">United Kingdom</option>
                            <option value="de" data-flag="de">Germany</option>
                            <option value="fr" data-flag="fr">France</option>
                            <option value="it" data-flag="it">Italy</option>
                            <option value="es" data-flag="es">Spain</option>
                        </optgroup>
                        <optgroup label="Asia">
                            <option value="jp" data-flag="jp">Japan</option>
                            <option value="cn" data-flag="cn">China</option>
                            <option value="in" data-flag="in">India</option>
                            <option value="au" data-flag="au">Australia</option>
                        </optgroup>
                        <optgroup label="Other">
                            <option value="br" data-flag="br">Brazil</option>
                            <option value="za" data-flag="za">South Africa</option>
                            <option value="ae" data-flag="ae">UAE</option>
                            <option value="other">Other Country</option>
                        </optgroup>
                    </select>
                </div>

                <div class="form-group" id="zip-group">
                    <label for="zip-code">ZIP/Postal Code <span class="tooltip"><i class="fas fa-info-circle"></i>
                        <span class="tooltiptext">Enter your ZIP code for hyper-local pricing</span>
                    </span></label>
                    <input type="text" id="zip-code" placeholder="Enter your ZIP code (optional)">
                </div>

                <button id="calculate-btn" class="btn btn-lg btn-block">
                    <i class="fas fa-calculator"></i> Calculate Monthly Costs
                </button>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Fetching real-time pricing data for your location...</p>
                </div>
            </div>

            <div class="results" id="results">
                <div class="pet-image">
                    <img id="pet-img" src="" alt="Pet image">
                </div>
                <h2>Your Personalized Pet Cost Analysis</h2>
                
                <div class="cost-breakdown">
                    <div class="cost-item">
                        <h3><i class="fas fa-utensils"></i> Food</h3>
                        <p id="food-cost">$0</p>
                    </div>
                    <div class="cost-item">
                        <h3><i class="fas fa-heartbeat"></i> Healthcare</h3>
                        <p id="healthcare-cost">$0</p>
                    </div>
                    <div class="cost-item">
                        <h3><i class="fas fa-spa"></i> Grooming</h3>
                        <p id="grooming-cost">$0</p>
                    </div>
                    <div class="cost-item">
                        <h3><i class="fas fa-shopping-basket"></i> Supplies</h3>
                        <p id="supplies-cost">$0</p>
                    </div>
                    <div class="cost-item">
                        <h3><i class="fas fa-shield-alt"></i> Insurance</h3>
                        <p id="insurance-cost">$0</p>
                    </div>
                </div>

                <div class="total-cost">
                    <h3>Total Estimated Monthly Cost</h3>
                    <p id="total-cost">$0</p>
                    <div id="cost-badge" class="gamification-badge" style="display: none;">Budget Pet Owner</div>
                </div>

                <div class="compare-section">
                    <h3><i class="fas fa-users"></i> Compare With Friends</h3>
                    <p>See how your pet costs compare to others with similar pets</p>
                    <div class="compare-result" id="compare-result">
                        Loading comparison data...
                    </div>
                    <button id="share-comparison" class="btn btn-secondary">
                        <i class="fas fa-share-alt"></i> Share Comparison
                    </button>
                </div>

                <div class="chart-container">
                    <canvas id="cost-chart"></canvas>
                </div>

                <div class="analytics-section">
                    <div class="analytics-card">
                        <h3><i class="fas fa-calendar-alt"></i> Yearly Projection</h3>
                        <p id="yearly-cost">$0</p>
                        <p>Estimated annual cost based on your monthly expenses</p>
                    </div>
                    <div class="analytics-card">
                        <h3><i class="fas fa-piggy-bank"></i> Potential Savings</h3>
                        <p id="potential-savings">$0</p>
                        <p>You could save this much annually with bulk purchases</p>
                    </div>
                    <div class="analytics-card">
                        <h3><i class="fas fa-stethoscope"></i> Vet Visit Probability</h3>
                        <p id="vet-probability">25%</p>
                        <p>Chance your pet will need vet care next month</p>
                    </div>
                </div>

                <div class="ai-advice">
                    <h3><i class="fas fa-robot"></i> AI Pet Cost Advisor</h3>
                    <p>Get personalized advice on managing your pet expenses</p>
                    <div class="ai-response" id="ai-response">
                        Ask me how to reduce your pet costs or find affordable products...
                    </div>
                    <div class="form-group" style="margin-top: 15px;">
                        <input type="text" id="ai-question" placeholder="Ask a question about pet costs...">
                        <button id="ask-ai" class="btn" style="margin-top: 10px;">
                            <i class="fas fa-paper-plane"></i> Ask AI
                        </button>
                    </div>
                </div>

                <div class="insurance-comparison">
                    <h3><i class="fas fa-clipboard-list"></i> Insurance Comparison</h3>
                    <p>Compare recommended insurance plans for your pet</p>
                    <div class="insurance-option">
                        <div style="display: flex; align-items: center;">
                            <img src="https://via.placeholder.com/80x40?text=Lemonade" alt="Lemonade" class="insurance-logo">
                            <div>
                                <h4>Lemonade</h4>
                                <p id="lemonade-cost">$0/month</p>
                            </div>
                        </div>
                        <button class="btn btn-secondary">Get Quote</button>
                    </div>
                    <div class="insurance-option">
                        <div style="display: flex; align-items: center;">
                            <img src="https://via.placeholder.com/80x40?text=Trupanion" alt="Trupanion" class="insurance-logo">
                            <div>
                                <h4>Trupanion</h4>
                                <p id="trupanion-cost">$0/month</p>
                            </div>
                        </div>
                        <button class="btn btn-secondary">Get Quote</button>
                    </div>
                    <div class="insurance-option">
                        <div style="display: flex; align-items: center;">
                            <img src="https://via.placeholder.com/80x40?text=Nationwide" alt="Nationwide" class="insurance-logo">
                            <div>
                                <h4>Nationwide</h4>
                                <p id="nationwide-cost">$0/month</p>
                            </div>
                        </div>
                        <button class="btn btn-secondary">Get Quote</button>
                    </div>
                </div>

                <div class="video-generator">
                    <h3><i class="fas fa-video"></i> Create Shareable Video</h3>
                    <p>Generate a fun video to share your pet's cost breakdown on social media</p>
                    <div class="video-preview" id="video-preview">
                        <div class="video-preview-text" id="video-text">My pet costs $0/month!</div>
                    </div>
                    <button id="generate-video" class="btn">
                        <i class="fas fa-film"></i> Generate Video
                    </button>
                    <button id="download-video" class="btn btn-secondary" style="display: none; margin-top: 10px;">
                        <i class="fas fa-download"></i> Download Video
                    </button>
                </div>

                <div class="quiz-container">
                    <h3><i class="fas fa-question-circle"></i> Pet Personality Quiz</h3>
                    <p>Find out which pet fits your budget and lifestyle</p>
                    
                    <div id="quiz-questions">
                        <div class="quiz-question">1. What's your ideal monthly pet budget?</div>
                        <div class="quiz-options">
                            <div class="quiz-option" data-value="low">Under $50</div>
                            <div class="quiz-option" data-value="medium">$50-$150</div>
                            <div class="quiz-option" data-value="high">$150+</div>
                        </div>
                        
                        <div class="quiz-question" style="display: none;">2. How much time can you spend daily on pet care?</div>
                        <div class="quiz-options" style="display: none;">
                            <div class="quiz-option" data-value="low">Less than 30 minutes</div>
                            <div class="quiz-option" data-value="medium">30 minutes to 2 hours</div>
                            <div class="quiz-option" data-value="high">2+ hours</div>
                        </div>
                        
                        <div class="quiz-question" style="display: none;">3. What type of pet experience do you prefer?</div>
                        <div class="quiz-options" style="display: none;">
                            <div class="quiz-option" data-value="independent">Independent and low-maintenance</div>
                            <div class="quiz-option" data-value="interactive">Interactive and playful</div>
                            <div class="quiz-option" data-value="companion">Companion and affectionate</div>
                        </div>
                    </div>
                    
                    <div class="quiz-result" id="quiz-result">
                        <h3>Your Perfect Pet Is...</h3>
                        <p id="quiz-pet-result">Loading recommendation...</p>
                        <button id="share-quiz" class="btn btn-secondary" style="margin-top: 15px;">
                            <i class="fas fa-share-alt"></i> Share Your Result
                        </button>
                    </div>
                    
                    <button id="next-question" class="btn" style="margin-top: 20px;">
                        Next Question <i class="fas fa-arrow-right"></i>
                    </button>
                </div>

                <div class="testimonial">
                    <h3><i class="fas fa-quote-left"></i> Real User Stories</h3>
                    <p>"This tool helped me realize I could afford a cat by showing me exactly where I could save on costs. I've had my rescue cat for 6 months now and the estimates were spot on!"</p>
                    <div class="testimonial-author">
                        <img src="https://randomuser.me/api/portraits/women/43.jpg" alt="Sarah J.">
                        <div>
                            <strong>Sarah J.</strong>
                            <div>Cat Owner, London</div>
                        </div>
                    </div>
                </div>

                <div class="share-buttons">
                    <div class="share-btn facebook"><i class="fab fa-facebook-f"></i></div>
                    <div class="share-btn twitter"><i class="fab fa-twitter"></i></div>
                    <div class="share-btn instagram"><i class="fab fa-instagram"></i></div>
                    <div class="share-btn pinterest"><i class="fab fa-pinterest-p"></i></div>
                </div>
            </div>
        </div>

        <!-- Comparison Tab -->
        <div class="tab-content" id="comparison-tab">
            <div class="pet-analyzer">
                <h2>Compare Pet Costs</h2>
                <p>See how different pets stack up against each other in terms of monthly expenses</p>
                
                <div class="form-group">
                    <label>Compare Up to 3 Pets</label>
                    <div id="comparison-pets-container">
                        <!-- Comparison pets will be added here dynamically -->
                    </div>
                    <button id="add-comparison-pet" class="btn btn-secondary" style="margin-top: 10px;">
                        <i class="fas fa-plus"></i> Add Pet to Compare
                    </button>
                </div>
                
                <button id="compare-pets-btn" class="btn btn-lg btn-block">
                    <i class="fas fa-chart-bar"></i> Compare Pets
                </button>
                
                <div class="results" id="comparison-results" style="display: none;">
                    <h2>Pet Cost Comparison</h2>
                    <div class="chart-container">
                        <canvas id="comparison-chart"></canvas>
                    </div>
                    
                    <div class="analytics-section">
                        <div class="analytics-card">
                            <h3><i class="fas fa-dollar-sign"></i> Most Affordable</h3>
                            <p id="most-affordable">-</p>
                            <p>Lowest monthly cost among compared pets</p>
                        </div>
                        <div class="analytics-card">
                            <h3><i class="fas fa-crown"></i> Most Expensive</h3>
                            <p id="most-expensive">-</p>
                            <p>Highest monthly cost among compared pets</p>
                        </div>
                        <div class="analytics-card">
                            <h3><i class="fas fa-lightbulb"></i> Best Value</h3>
                            <p id="best-value">-</p>
                            <p>Best balance of cost and features</p>
                        </div>
                    </div>
                    
                    <div class="share-buttons">
                        <div class="share-btn facebook"><i class="fab fa-facebook-f"></i></div>
                        <div class="share-btn twitter"><i class="fab fa-twitter"></i></div>
                        <div class="share-btn instagram"><i class="fab fa-instagram"></i></div>
                        <div class="share-btn pinterest"><i class="fab fa-pinterest-p"></i></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resources Tab -->
        <div class="tab-content" id="resources-tab">
            <div class="pet-analyzer">
                <h2>Pet Care Resources</h2>
                <p>Helpful guides, articles and tools for pet owners</p>
                
                <div class="resources-grid">
                    <div class="resource-card">
                        <h3>Budgeting for Your First Pet</h3>
                        <p>Learn how to prepare financially for bringing home a new pet with our comprehensive guide.</p>
                        <a href="#">Read Guide <i class="fas fa-arrow-right"></i></a>
                    </div>
                    
                    <div class="resource-card">
                        <h3>Pet Insurance Comparison</h3>
                        <p>Understand the different types of pet insurance and how to choose the best one for your needs.</p>
                        <a href="#">Compare Plans <i class="fas fa-arrow-right"></i></a>
                    </div>
                    
                    <div class="resource-card">
                        <h3>DIY Pet Grooming Tips</h3>
                        <p>Save money by learning how to groom your pet at home with these professional techniques.</p>
                        <a href="#">View Tips <i class="fas fa-arrow-right"></i></a>
                    </div>
                    
                    <div class="resource-card">
                        <h3>Pet Food Calculator</h3>
                        <p>Determine exactly how much food your pet needs based on size, age and activity level.</p>
                        <a href="#">Calculate Needs <i class="fas fa-arrow-right"></i></a>
                    </div>
                    
                    <div class="resource-card">
                        <h3>Vet Visit Checklist</h3>
                        <p>Be prepared for your next vet appointment with our comprehensive checklist.</p>
                        <a href="#">Download Checklist <i class="fas fa-arrow-right"></i></a>
                    </div>
                    
                    <div class="resource-card">
                        <h3>Pet Emergency Fund Guide</h3>
                        <p>Learn how to set up and maintain an emergency fund for unexpected pet expenses.</p>
                        <a href="#">Read Guide <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>
                
                <div class="testimonial" style="margin-top: 40px;">
                    <h3><i class="fas fa-quote-left"></i> Pet Owner Success Story</h3>
                    <p>"The budgeting guide helped me save over $500 in the first year with my dog by showing me where I could cut costs without sacrificing quality of care."</p>
                    <div class="testimonial-author">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Michael T.">
                        <div>
                            <strong>Michael T.</strong>
                            <div>Dog Owner, Chicago</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="pet-mascot" id="pet-mascot" style="background-image: url('https://cdn.pixabay.com/animation/2022/10/11/03/16/03-16-39-160_512.gif')"></div>

    <footer>
        <p>Ultimate Pet Cost Analyzer &copy; 2023 | Prices are estimates based on real-time data and may vary by location</p>
        <p><i class="fas fa-sync-alt"></i> Data updated daily | <i class="fas fa-lock"></i> Secure calculations</p>
        <p style="margin-top: 15px;">
            <a href="#" style="color: var(--primary); text-decoration: none; margin: 0 10px;">Blog</a>
            <a href="#" style="color: var(--primary); text-decoration: none; margin: 0 10px;">About Us</a>
            <a href="#" style="color: var(--primary); text-decoration: none; margin: 0 10px;">Vet Partners</a>
            <a href="#" style="color: var(--primary); text-decoration: none; margin: 0 10px;">API</a>
            <a href="#" style="color: var(--primary); text-decoration: none; margin: 0 10px;">Contact</a>
        </p>
    </footer>

    <script>
        // Enhanced breed data for different pet types with more specific farm animals
        const breedData = {
            'dog': ['Labrador Retriever', 'German Shepherd', 'Golden Retriever', 'Bulldog', 'Beagle', 
                   'Poodle', 'Rottweiler', 'Yorkshire Terrier', 'Boxer', 'Dachshund', 'Siberian Husky',
                   'Great Dane', 'Shih Tzu', 'Chihuahua', 'Border Collie', 'Australian Shepherd'],
            'cat': ['Domestic Shorthair', 'Siamese', 'Persian', 'Maine Coon', 'Ragdoll', 
                   'Bengal', 'Abyssinian', 'Scottish Fold', 'Sphynx', 'British Shorthair',
                   'Russian Blue', 'Norwegian Forest Cat', 'Burmese', 'Birman', 'Tonkinese'],
            'bird': ['Parakeet', 'Cockatiel', 'Lovebird', 'Canary', 'Finch', 
                    'African Grey', 'Macaw', 'Cockatoo', 'Amazon Parrot', 'Conure',
                    'Budgerigar', 'Eclectus Parrot', 'Quaker Parrot', 'Pionus', 'Caique'],
            'fish': ['Goldfish', 'Betta', 'Guppy', 'Angelfish', 'Tetra', 
                    'Cichlid', 'Discus', 'Oscar', 'Clownfish', 'Neon Tetra',
                    'Zebra Danio', 'Platy', 'Molly', 'Swordtail', 'Koi'],
            'reptile': ['Bearded Dragon', 'Leopard Gecko', 'Ball Python', 'Corn Snake', 'Tortoise', 
                       'Iguana', 'Chameleon', 'Crested Gecko', 'Turtle', 'Boa Constrictor',
                       'Blue Tongue Skink', 'Uromastyx', 'Monitor Lizard', 'Garter Snake', 'Anole'],
            'small-mammal': ['Rabbit', 'Guinea Pig', 'Hamster', 'Rat', 'Mouse', 
                            'Ferret', 'Chinchilla', 'Hedgehog', 'Gerbil', 'Sugar Glider',
                            'Degus', 'Fancy Mouse', 'Dwarf Hamster', 'Prairie Dog', 'Skunk'],
            'exotic': ['Tarantula', 'Scorpion', 'Frog', 'Salamander', 'Axolotl', 
                      'Hermit Crab', 'Stick Insect', 'Millipede', 'Snail', 'Pygmy Hedgehog',
                      'Mantis', 'Centipede', 'Ant Farm', 'Sea Monkeys', 'Butterflies'],
            'farm': ['Chicken', 'Duck', 'Goat', 'Sheep', 'Pig', 
                    'Cow', 'Horse', 'Donkey', 'Alpaca', 'Llama',
                    'Turkey', 'Goose', 'Quail', 'Peacock', 'Emu'],
            'amphibian': ['Tree Frog', 'Toad', 'Newt', 'Salamander', 'Fire Belly Newt',
                         'Pacman Frog', 'Dart Frog', 'Bullfrog', 'Mudpuppy', 'Siren'],
            'invertebrate': ['Tarantula', 'Scorpion', 'Mantis', 'Beetle', 'Stick Insect',
                            'Millipede', 'Centipede', 'Ants', 'Praying Mantis', 'Hissing Cockroach'],
            'other': ['Other']
        };

        // Pet images with more variety
        const petImages = {
            'dog': 'https://images.unsplash.com/photo-1586671267731-da2cf3ceeb80?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            'cat': 'https://images.unsplash.com/photo-1519052537078-e6302a4968d4?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            'bird': 'https://images.unsplash.com/photo-1551085254-e96b210db58a?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            'fish': 'https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            'reptile': 'https://images.unsplash.com/photo-1497752531616-c3afd9760b11?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            'small-mammal': 'https://images.unsplash.com/photo-1551651656-10a2c4a3a7fc?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            'exotic': 'https://images.unsplash.com/photo-1559253664-ca249d4608c6?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            'farm': 'https://images.unsplash.com/photo-1500595046743-cd271d694d30?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            'amphibian': 'https://images.unsplash.com/photo-1559253664-ca249d4608c6?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            'invertebrate': 'https://images.unsplash.com/photo-1561037404-61cd46aa615b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80',
            'other': 'https://images.unsplash.com/photo-1555169062-013468b47731?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
        };

        // Enhanced base costs for different pet types with more realistic pricing
        const baseCosts = {
            'dog': {
                'food': 80,
                'healthcare': 60,
                'grooming': 40,
                'supplies': 45,
                'insurance': 70,
                'training': 35,
                'boarding': 50
            },
            'cat': {
                'food': 50,
                'healthcare': 45,
                'grooming': 30,
                'supplies': 40,
                'insurance': 50,
                'training': 25,
                'boarding': 40
            },
            'bird': {
                'food': 25,
                'healthcare': 35,
                'grooming': 20,
                'supplies': 45,
                'insurance': 30,
                'training': 15,
                'boarding': 30
            },
            'fish': {
                'food': 20,
                'healthcare': 15,
                'grooming': 10,
                'supplies': 60,
                'insurance': 0,
                'training': 0,
                'boarding': 20
            },
            'reptile': {
                'food': 35,
                'healthcare': 30,
                'grooming': 15,
                'supplies': 70,
                'insurance': 25,
                'training': 10,
                'boarding': 35
            },
            'small-mammal': {
                'food': 25,
                'healthcare': 25,
                'grooming': 15,
                'supplies': 40,
                'insurance': 25,
                'training': 10,
                'boarding': 30
            },
            'exotic': {
                'food': 40,
                'healthcare': 50,
                'grooming': 25,
                'supplies': 80,
                'insurance': 35,
                'training': 15,
                'boarding': 45
            },
            'farm': {
                'Chicken': {
                    'food': 20,
                    'healthcare': 15,
                    'grooming': 10,
                    'supplies': 30,
                    'insurance': 10,
                    'training': 0,
                    'boarding': 15
                },
                'Horse': {
                    'food': 250,
                    'healthcare': 180,
                    'grooming': 70,
                    'supplies': 120,
                    'insurance': 150,
                    'training': 100,
                    'boarding': 350
                },
                'Goat': {
                    'food': 50,
                    'healthcare': 40,
                    'grooming': 20,
                    'supplies': 60,
                    'insurance': 35,
                    'training': 15,
                    'boarding': 70
                },
                'Pig': {
                    'food': 100,
                    'healthcare': 80,
                    'grooming': 30,
                    'supplies': 90,
                    'insurance': 50,
                    'training': 20,
                    'boarding': 120
                },
                'Cow': {
                    'food': 180,
                    'healthcare': 120,
                    'grooming': 40,
                    'supplies': 150,
                    'insurance': 100,
                    'training': 30,
                    'boarding': 250
                },
                'default': {
                    'food': 60,
                    'healthcare': 55,
                    'grooming': 35,
                    'supplies': 70,
                    'insurance': 45,
                    'training': 25,
                    'boarding': 60
                }
            },
            'amphibian': {
                'food': 25,
                'healthcare': 20,
                'grooming': 10,
                'supplies': 50,
                'insurance': 15,
                'training': 0,
                'boarding': 20
            },
            'invertebrate': {
                'food': 20,
                'healthcare': 15,
                'grooming': 10,
                'supplies': 45,
                'insurance': 10,
                'training': 0,
                'boarding': 15
            },
            'other': {
                'food': 35,
                'healthcare': 35,
                'grooming': 20,
                'supplies': 50,
                'insurance': 30,
                'training': 15,
                'boarding': 35
            }
        };

        // Enhanced lifestyle multipliers with more tiers
        const lifestyleMultipliers = {
            'basic': {
                'food': 0.8,
                'healthcare': 0.9,
                'grooming': 0.7,
                'supplies': 0.8,
                'insurance': 0.9,
                'training': 0.6,
                'boarding': 0.8
            },
            'standard': {
                'food': 1.0,
                'healthcare': 1.0,
                'grooming': 1.0,
                'supplies': 1.0,
                'insurance': 1.0,
                'training': 1.0,
                'boarding': 1.0
            },
            'premium': {
                'food': 1.4,
                'healthcare': 1.3,
                'grooming': 1.4,
                'supplies': 1.5,
                'insurance': 1.3,
                'training': 1.2,
                'boarding': 1.4
            },
            'luxury': {
                'food': 2.0,
                'healthcare': 1.8,
                'grooming': 2.0,
                'supplies': 2.2,
                'insurance': 1.8,
                'training': 1.6,
                'boarding': 2.0
            }
        };

        // Size multipliers (for dogs/cats)
        const sizeMultipliers = {
            'small': 0.8,
            'medium': 1.0,
            'large': 1.3,
            'xlarge': 1.6
        };

        // Age multipliers with more detail
        const ageMultipliers = {
            'young': {
                'food': 1.1,
                'healthcare': 1.4,
                'grooming': 1.0,
                'supplies': 1.2,
                'insurance': 1.3,
                'training': 1.5,
                'boarding': 1.0
            },
            'adult': {
                'food': 1.0,
                'healthcare': 1.0,
                'grooming': 1.0,
                'supplies': 1.0,
                'insurance': 1.0,
                'training': 1.0,
                'boarding': 1.0
            },
            'senior': {
                'food': 0.9,
                'healthcare': 1.7,
                'grooming': 1.1,
                'supplies': 1.0,
                'insurance': 1.6,
                'training': 0.6,
                'boarding': 1.1
            }
        };

        // Enhanced country cost of living adjustments with more countries
        const countryMultipliers = {
            'us': 1.0,      // United States
            'ca': 0.95,     // Canada
            'mx': 0.65,     // Mexico
            'uk': 0.92,     // United Kingdom
            'de': 0.88,     // Germany
            'fr': 0.9,      // France
            'it': 0.85,     // Italy
            'es': 0.82,     // Spain
            'jp': 1.05,     // Japan
            'cn': 0.7,      // China
            'in': 0.55,     // India
            'au': 1.02,     // Australia
            'br': 0.6,      // Brazil
            'za': 0.65,     // South Africa
            'ae': 0.98,     // UAE
            'other': 0.85   // Other countries
        };

        // Country flag mapping (using ISO country codes)
        const countryFlags = {
            'us': '🇺🇸',
            'ca': '🇨🇦',
            'mx': '🇲🇽',
            'uk': '🇬🇧',
            'de': '🇩🇪',
            'fr': '🇫🇷',
            'it': '🇮🇹',
            'es': '🇪🇸',
            'jp': '🇯🇵',
            'cn': '🇨🇳',
            'in': '🇮🇳',
            'au': '🇦🇺',
            'br': '🇧🇷',
            'za': '🇿🇦',
            'ae': '🇦🇪'
        };

        // Quiz results mapping
        const quizResults = {
            'low-independent': {
                pet: 'Fish or Small Rodent',
                description: 'Based on your budget and preferences, a low-maintenance pet like a fish or hamster would be perfect for you!',
                image: 'https://images.unsplash.com/photo-1544551763-46a013bb70d5?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
            },
            'low-interactive': {
                pet: 'Bird or Rabbit',
                description: 'A small bird or rabbit would fit your budget while still providing interactive companionship.',
                image: 'https://images.unsplash.com/photo-1551085254-e96b210db58a?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
            },
            'low-companion': {
                pet: 'Cat or Small Dog',
                description: 'Consider adopting an adult cat or small dog from a shelter - they can be very affordable and loving companions!',
                image: 'https://images.unsplash.com/photo-1519052537078-e6302a4968d4?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
            },
            'medium-independent': {
                pet: 'Reptile or Amphibian',
                description: 'A reptile or amphibian would suit your lifestyle - fascinating to watch but not needing constant attention.',
                image: 'https://images.unsplash.com/photo-1497752531616-c3afd9760b11?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
            },
            'medium-interactive': {
                pet: 'Cat or Small Dog',
                description: 'A cat or small dog would be perfect for your budget and the amount of interaction you want.',
                image: 'https://images.unsplash.com/photo-1586671267731-da2cf3ceeb80?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
            },
            'medium-companion': {
                pet: 'Medium Dog or Pair of Rabbits',
                description: 'A medium-sized dog or a pair of bonded rabbits would make great companions for you.',
                image: 'https://images.unsplash.com/photo-1551651656-10a2c4a3a7fc?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
            },
            'high-independent': {
                pet: 'Exotic Pet or Aquarium',
                description: 'With your budget, you could consider an exotic pet or a beautiful aquarium setup.',
                image: 'https://images.unsplash.com/photo-1559253664-ca249d4608c6?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
            },
            'high-interactive': {
                pet: 'Large Dog or Multiple Pets',
                description: 'You could comfortably afford a large dog or even multiple pets with your budget!',
                image: 'https://images.unsplash.com/photo-1500595046743-cd271d694d30?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
            },
            'high-companion': {
                pet: 'Dog from Special Breed',
                description: 'Consider a special breed dog that matches your personality - you have the budget for proper care!',
                image: 'https://images.unsplash.com/photo-1561037404-61cd46aa615b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80'
            }
        };

        // AI responses based on question keywords
        const aiResponses = {
            'save money': [
                "To save money on your pet's food, consider buying in bulk or looking for store brand alternatives that meet nutritional standards.",
                "Many pet owners save on veterinary costs by establishing a relationship with a local vet who offers discounts for regular checkups.",
                "DIY grooming between professional sessions can significantly reduce costs. Invest in quality brushes and nail clippers to maintain your pet at home."
            ],
            'food': [
                "The amount of food your pet needs depends on their size, age and activity level. As a general rule, adult dogs need about 30 calories per pound of body weight daily.",
                "Premium pet foods often have higher quality ingredients but may not always be necessary. Look for foods that meet AAFCO standards for your pet's life stage.",
                "Consider rotating protein sources in your pet's diet to provide variety and potentially reduce food sensitivities."
            ],
            'insurance': [
                "Pet insurance typically costs between $30-$70 per month for dogs and $15-$40 for cats, depending on coverage level and your pet's age/breed.",
                "When comparing pet insurance, look at the deductible, reimbursement percentage, and annual maximums - not just the monthly premium.",
                "Most pet insurance plans don't cover pre-existing conditions, so it's best to enroll your pet while they're young and healthy."
            ],
            'health': [
                "Regular preventive care (vaccinations, dental cleanings) can save money in the long run by avoiding more serious health issues.",
                "Some common signs your pet needs veterinary attention: changes in appetite, energy level, bathroom habits, or unusual lumps/bumps.",
                "Many human foods are toxic to pets including chocolate, grapes, onions, and xylitol (found in sugar-free products)."
            ],
            'default': [
                "The first year with a new pet is often the most expensive due to initial setup costs and vaccinations.",
                "Consider setting aside a pet emergency fund with 3-6 months of estimated expenses for unexpected veterinary costs.",
                "Many pet supply stores offer loyalty programs that can lead to significant savings over time."
            ]
        };

        // DOM elements
        const petTypeSelect = document.getElementById('pet-type');
        const breedGroup = document.getElementById('breed-group');
        const petBreedSelect = document.getElementById('pet-breed');
        const calculateBtn = document.getElementById('calculate-btn');
        const resultsDiv = document.getElementById('results');
        const loadingDiv = document.getElementById('loading');
        const petImg = document.getElementById('pet-img');
        const sizeGroup = document.getElementById('size-group');
        const petIcons = document.querySelectorAll('.pet-icon');
        const locationSelect = document.getElementById('location');
        const zipGroup = document.getElementById('zip-group');
        const costBadge = document.getElementById('cost-badge');
        const compareResult = document.getElementById('compare-result');
        const shareComparisonBtn = document.getElementById('share-comparison');
        const yearlyCost = document.getElementById('yearly-cost');
        const potentialSavings = document.getElementById('potential-savings');
        const vetProbability = document.getElementById('vet-probability');
        const aiQuestion = document.getElementById('ai-question');
        const askAiBtn = document.getElementById('ask-ai');
        const aiResponse = document.getElementById('ai-response');
        const generateVideoBtn = document.getElementById('generate-video');
        const downloadVideoBtn = document.getElementById('download-video');
        const videoPreview = document.getElementById('video-preview');
        const videoText = document.getElementById('video-text');
        const nextQuestionBtn = document.getElementById('next-question');
        const quizResult = document.getElementById('quiz-result');
        const quizPetResult = document.getElementById('quiz-pet-result');
        const shareQuizBtn = document.getElementById('share-quiz');
        const lemonadeCost = document.getElementById('lemonade-cost');
        const trupanionCost = document.getElementById('trupanion-cost');
        const nationwideCost = document.getElementById('nationwide-cost');
        const petMascot = document.getElementById('pet-mascot');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const addComparisonPetBtn = document.getElementById('add-comparison-pet');
        const comparePetsBtn = document.getElementById('compare-pets-btn');
        const comparisonPetsContainer = document.getElementById('comparison-pets-container');
        const comparisonResults = document.getElementById('comparison-results');
        const mostAffordable = document.getElementById('most-affordable');
        const mostExpensive = document.getElementById('most-expensive');
        const bestValue = document.getElementById('best-value');

        // Tab system
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Show corresponding content
                tabContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === `${tabId}-tab`) {
                        content.classList.add('active');
                    }
                });
            });
        });

        // Comparison pets array
        let comparisonPets = [];

        // Add comparison pet
        function addComparisonPet() {
            if (comparisonPets.length >= 3) {
                alert('You can compare up to 3 pets at a time');
                return;
            }
            
            const petId = `pet-compare-${comparisonPets.length + 1}`;
            const petDiv = document.createElement('div');
            petDiv.className = 'form-group';
            petDiv.id = petId;
            petDiv.innerHTML = `
                <label>Pet ${comparisonPets.length + 1}</label>
                <div style="display: flex; gap: 10px;">
                    <select class="compare-pet-type" style="flex: 2;">
                        <option value="">-- Select Pet Type --</option>
                        <option value="dog">Dog</option>
                        <option value="cat">Cat</option>
                        <option value="bird">Bird</option>
                        <option value="fish">Fish</option>
                        <option value="reptile">Reptile</option>
                        <option value="small-mammal">Small Mammal</option>
                    </select>
                    <select class="compare-pet-breed" style="flex: 2;" disabled>
                        <option value="">-- Select Breed --</option>
                    </select>
                    <select class="compare-pet-lifestyle" style="flex: 1.5;">
                        <option value="basic">Basic</option>
                        <option value="standard" selected>Standard</option>
                        <option value="premium">Premium</option>
                    </select>
                    <button class="btn btn-secondary remove-pet" style="flex: 0.5; min-width: 40px;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            comparisonPetsContainer.appendChild(petDiv);
            comparisonPets.push({
                id: petId,
                type: '',
                breed: '',
                lifestyle: 'standard'
            });
            
            // Add event listeners
            const petTypeSelect = petDiv.querySelector('.compare-pet-type');
            const petBreedSelect = petDiv.querySelector('.compare-pet-breed');
            const lifestyleSelect = petDiv.querySelector('.compare-pet-lifestyle');
            const removeBtn = petDiv.querySelector('.remove-pet');
            
            petTypeSelect.addEventListener('change', function() {
                const petIndex = comparisonPets.findIndex(p => p.id === petId);
                comparisonPets[petIndex].type = this.value;
                
                // Update breeds
                if (this.value) {
                    petBreedSelect.disabled = false;
                    petBreedSelect.innerHTML = '<option value="">-- Select Breed --</option>';
                    
                    breedData[this.value].forEach(breed => {
                        const option = document.createElement('option');
                        option.value = breed.toLowerCase().replace(' ', '-');
                        option.textContent = breed;
                        petBreedSelect.appendChild(option);
                    });
                } else {
                    petBreedSelect.disabled = true;
                }
            });
            
            petBreedSelect.addEventListener('change', function() {
                const petIndex = comparisonPets.findIndex(p => p.id === petId);
                comparisonPets[petIndex].breed = this.value;
            });
            
            lifestyleSelect.addEventListener('change', function() {
                const petIndex = comparisonPets.findIndex(p => p.id === petId);
                comparisonPets[petIndex].lifestyle = this.value;
            });
            
            removeBtn.addEventListener('click', function() {
                const petIndex = comparisonPets.findIndex(p => p.id === petId);
                comparisonPets.splice(petIndex, 1);
                petDiv.remove();
                
                // Renumber remaining pets
                document.querySelectorAll('#comparison-pets-container > div').forEach((div, index) => {
                    div.querySelector('label').textContent = `Pet ${index + 1}`;
                });
            });
        }

        // Compare pets
        function comparePets() {
            if (comparisonPets.length < 2) {
                alert('Please add at least 2 pets to compare');
                return;
            }
            
            // Calculate costs for each pet
            const petCosts = comparisonPets.map(pet => {
                if (!pet.type || !pet.breed) {
                    return null;
                }
                
                // Get base costs - special handling for farm animals
                let baseCost;
                if (pet.type === 'farm') {
                    const breedName = document.querySelector(`#${pet.id} .compare-pet-breed option:checked`).text;
                    baseCost = baseCosts[pet.type][breedName] || baseCosts[pet.type]['default'];
                } else {
                    baseCost = baseCosts[pet.type];
                }
                
                const lifestyleMultiplier = lifestyleMultipliers[pet.lifestyle];
                const countryMultiplier = countryMultipliers[locationSelect.value] || 1.0;
                
                // Calculate total cost
                let totalCost = 0;
                for (const category in baseCost) {
                    totalCost += baseCost[category] * lifestyleMultiplier[category] * countryMultiplier;
                }
                
                return {
                    name: `${pet.type} (${document.querySelector(`#${pet.id} .compare-pet-breed option:checked`).text})`,
                    cost: totalCost,
                    lifestyle: pet.lifestyle
                };
            }).filter(pet => pet !== null);
            
            if (petCosts.length < 2) {
                alert('Please make sure all pets have type and breed selected');
                return;
            }
            
            // Sort by cost
            petCosts.sort((a, b) => a.cost - b.cost);
            
            // Update comparison results
            mostAffordable.textContent = `${petCosts[0].name} at ${formatCurrency(petCosts[0].cost, locationSelect.value)}/month`;
            mostExpensive.textContent = `${petCosts[petCosts.length - 1].name} at ${formatCurrency(petCosts[petCosts.length - 1].cost, locationSelect.value)}/month`;
            
            // Determine best value (middle ground)
            const bestValuePet = petCosts[Math.floor(petCosts.length / 2)];
            bestValue.textContent = `${bestValuePet.name} at ${formatCurrency(bestValuePet.cost, locationSelect.value)}/month (${bestValuePet.lifestyle} care)`;
            
            // Update chart
            updateComparisonChart(
                petCosts.map(pet => pet.name),
                petCosts.map(pet => pet.cost),
                locationSelect.value
            );
            
            // Show results
            comparisonResults.style.display = 'block';
            comparisonResults.scrollIntoView({ behavior: 'smooth' });
        }

        // Update comparison chart
        function updateComparisonChart(labels, data, country) {
            const ctx = document.getElementById('comparison-chart').getContext('2d');
            const currencySymbol = formatCurrency(1, country).charAt(0);
            
            if (window.comparisonChart) {
                window.comparisonChart.destroy();
            }
            
            window.comparisonChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: `Monthly Cost (${currencySymbol})`,
                        data: data,
                        backgroundColor: [
                            '#6c5ce7',
                            '#00b894',
                            '#fd79a8',
                            '#fdcb6e',
                            '#0984e3'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${currencySymbol}${context.raw.toLocaleString()}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return currencySymbol + value;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Quiz state
        let currentQuestion = 1;
        const quizAnswers = {};

        // Add flags to country select options
        function addCountryFlags() {
            const options = locationSelect.options;
            for (let i = 0; i < options.length; i++) {
                const option = options[i];
                const flag = option.getAttribute('data-flag');
                if (flag && countryFlags[flag]) {
                    option.textContent = countryFlags[flag] + ' ' + option.textContent;
                }
            }
        }

        // Event listeners
        petTypeSelect.addEventListener('change', updateBreeds);
        calculateBtn.addEventListener('click', calculateCosts);
        shareComparisonBtn.addEventListener('click', shareComparison);
        askAiBtn.addEventListener('click', getAIAdvice);
        generateVideoBtn.addEventListener('click', generateVideo);
        downloadVideoBtn.addEventListener('click', downloadVideo);
        nextQuestionBtn.addEventListener('click', nextQuizQuestion);
        shareQuizBtn.addEventListener('click', shareQuizResult);
        petMascot.addEventListener('click', animateMascot);
        addComparisonPetBtn.addEventListener('click', addComparisonPet);
        comparePetsBtn.addEventListener('click', comparePets);
        
        // Pet icon click handlers
        petIcons.forEach(icon => {
            icon.addEventListener('click', () => {
                petIcons.forEach(i => i.classList.remove('active'));
                icon.classList.add('active');
                petTypeSelect.value = icon.getAttribute('data-pet');
                updateBreeds();
            });
        });

        // Quiz option click handlers
        document.querySelectorAll('.quiz-option').forEach(option => {
            option.addEventListener('click', function() {
                // Remove active class from all options in this question
                this.parentNode.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.style.backgroundColor = 'rgba(255,255,255,0.2)';
                });
                
                // Highlight selected option
                this.style.backgroundColor = 'rgba(255,255,255,0.4)';
                
                // Store answer
                if (currentQuestion === 1) {
                    quizAnswers.budget = this.getAttribute('data-value');
                } else if (currentQuestion === 2) {
                    quizAnswers.time = this.getAttribute('data-value');
                } else if (currentQuestion === 3) {
                    quizAnswers.type = this.getAttribute('data-value');
                }
            });
        });

        // Update breed options based on pet type
        function updateBreeds() {
            const petType = petTypeSelect.value;
            
            // Show/hide size group based on pet type
            if (petType === 'dog' || petType === 'cat') {
                sizeGroup.style.display = 'block';
            } else {
                sizeGroup.style.display = 'none';
            }
            
            if (petType) {
                breedGroup.style.display = 'block';
                petBreedSelect.innerHTML = '<option value="">-- Select Breed/Type --</option>';
                
                breedData[petType].forEach(breed => {
                    const option = document.createElement('option');
                    option.value = breed.toLowerCase().replace(' ', '-');
                    option.textContent = breed;
                    petBreedSelect.appendChild(option);
                });
                
                // Update pet image
                petImg.src = petImages[petType];
            } else {
                breedGroup.style.display = 'none';
            }
        }

        // Calculate estimated monthly costs
        function calculateCosts() {
            const petType = petTypeSelect.value;
            const breed = petBreedSelect.value;
            
            if (!petType) {
                alert('Please select a pet type');
                return;
            }
            
            // Show loading animation
            loadingDiv.style.display = 'block';
            resultsDiv.style.display = 'none';
            
            // Simulate fetching real-time data (in a real app, this would be API calls)
            setTimeout(() => {
                const lifestyle = document.querySelector('input[name="lifestyle"]:checked').value;
                const size = document.getElementById('pet-size').value;
                const age = document.getElementById('pet-age').value;
                const country = document.getElementById('location').value;
                const zip = document.getElementById('zip-code').value;
                
                // Get base costs - special handling for farm animals
                let baseCost;
                if (petType === 'farm' && breed) {
                    const breedName = petBreedSelect.options[petBreedSelect.selectedIndex].text;
                    baseCost = baseCosts[petType][breedName] || baseCosts[petType]['default'];
                } else {
                    baseCost = baseCosts[petType];
                }
                
                const lifestyleMultiplier = lifestyleMultipliers[lifestyle];
                const sizeMultiplier = (petType === 'dog' || petType === 'cat') ? sizeMultipliers[size] : 1.0;
                const ageMultiplier = ageMultipliers[age];
                const countryMultiplier = countryMultipliers[country];
                
                // Calculate final costs for each category
                const costs = {};
                for (const category in baseCost) {
                    costs[category] = baseCost[category] * 
                                     lifestyleMultiplier[category] * 
                                     (category === 'food' || category === 'grooming' ? sizeMultiplier : 1) * 
                                     ageMultiplier[category] * 
                                     countryMultiplier;
                }
                
                const totalCost = Object.values(costs).reduce((sum, cost) => sum + cost, 0);
                
                // Update UI with calculated costs
                document.getElementById('food-cost').textContent = formatCurrency(costs.food, country);
                document.getElementById('healthcare-cost').textContent = formatCurrency(costs.healthcare, country);
                document.getElementById('grooming-cost').textContent = formatCurrency(costs.grooming, country);
                document.getElementById('supplies-cost').textContent = formatCurrency(costs.supplies, country);
                document.getElementById('insurance-cost').textContent = formatCurrency(costs.insurance, country);
                document.getElementById('total-cost').textContent = formatCurrency(totalCost, country);
                
                // Update analytics
                yearlyCost.textContent = formatCurrency(totalCost * 12, country);
                potentialSavings.textContent = formatCurrency(totalCost * 0.15 * 12, country); // 15% potential savings
                
                // Update insurance comparisons
                lemonadeCost.textContent = formatCurrency(costs.insurance * 0.9, country); // 10% cheaper
                trupanionCost.textContent = formatCurrency(costs.insurance * 1.1, country); // 10% more expensive
                nationwideCost.textContent = formatCurrency(costs.insurance, country); // Same as estimate
                
                // Update video text
                videoText.textContent = `My ${petType} costs ${formatCurrency(totalCost, country)}/month!`;
                
                // Set gamification badge based on lifestyle
                costBadge.style.display = 'block';
                if (lifestyle === 'luxury') {
                    costBadge.textContent = 'Luxury Pet Parent 🏆';
                    costBadge.style.background = 'linear-gradient(to right, var(--luxury), var(--warning))';
                } else if (lifestyle === 'premium') {
                    costBadge.textContent = 'Premium Caregiver ✨';
                    costBadge.style.background = 'linear-gradient(to right, var(--info), var(--secondary))';
                } else if (lifestyle === 'standard') {
                    costBadge.textContent = 'Standard Provider 👍';
                    costBadge.style.background = 'linear-gradient(to right, var(--success), var(--primary-light))';
                } else {
                    costBadge.textContent = 'Budget Pet Owner 💰';
                    costBadge.style.background = 'linear-gradient(to right, var(--primary-light), var(--light-gray))';
                }
                
                // Generate comparison text
                const comparisons = [
                    `Your ${petType} costs ${Math.round(Math.random() * 30) + 10}% ${Math.random() > 0.5 ? 'more' : 'less'} than similar pets in your area!`,
                    `You spend ${Math.round(Math.random() * 40) + 10}% ${Math.random() > 0.5 ? 'more' : 'less'} on food than the average ${petType} owner.`,
                    `Your healthcare costs are ${Math.round(Math.random() * 50) + 10}% ${Math.random() > 0.5 ? 'above' : 'below'} the national average.`
                ];
                compareResult.textContent = comparisons[Math.floor(Math.random() * comparisons.length)];
                
                // Update vet probability (simple simulation)
                if (age === 'senior') {
                    vetProbability.textContent = '65%';
                } else if (age === 'young') {
                    vetProbability.textContent = '45%';
                } else {
                    vetProbability.textContent = '30%';
                }
                
                // Update chart
                updateChart([
                    costs.food, 
                    costs.healthcare, 
                    costs.grooming, 
                    costs.supplies, 
                    costs.insurance,
                    costs.training,
                    costs.boarding
                ], country, [
                    'Food', 
                    'Healthcare', 
                    'Grooming', 
                    'Supplies', 
                    'Insurance',
                    'Training',
                    'Boarding'
                ]);
                
                // Hide loading and show results
                loadingDiv.style.display = 'none';
                resultsDiv.style.display = 'block';
                
                // Scroll to results
                resultsDiv.scrollIntoView({ behavior: 'smooth' });
                
                // Animate mascot based on lifestyle
                animateMascot(lifestyle);
            }, 1500);
        }

        // Format currency based on country
        function formatCurrency(amount, country) {
            const currencies = {
                'us': 'USD',
                'ca': 'CAD',
                'mx': 'MXN',
                'uk': 'GBP',
                'de': 'EUR',
                'fr': 'EUR',
                'it': 'EUR',
                'es': 'EUR',
                'jp': 'JPY',
                'cn': 'CNY',
                'in': 'INR',
                'au': 'AUD',
                'br': 'BRL',
                'za': 'ZAR',
                'ae': 'AED',
                'other': 'USD'
            };
            
            const currencySymbols = {
                'USD': '$',
                'CAD': '$',
                'MXN': '$',
                'GBP': '£',
                'EUR': '€',
                'JPY': '¥',
                'CNY': '¥',
                'INR': '₹',
                'AUD': '$',
                'BRL': 'R$',
                'ZAR': 'R',
                'AED': 'د.إ'
            };
            
            const currency = currencies[country];
            const symbol = currencySymbols[currency] || '$';
            
            // Round to 2 decimal places (except for JPY which doesn't use decimals)
            amount = currency === 'JPY' ? Math.round(amount) : Math.round(amount * 100) / 100;
            
            // Format number with commas
            const formattedAmount = amount.toLocaleString(undefined, {
                minimumFractionDigits: currency === 'JPY' ? 0 : 2,
                maximumFractionDigits: currency === 'JPY' ? 0 : 2
            });
            
            return symbol + formattedAmount;
        }

        // Share comparison results
        function shareComparison() {
            const petType = petTypeSelect.value;
            const totalCost = document.getElementById('total-cost').textContent;
            const comparisonText = compareResult.textContent;
            
            const shareText = `My ${petType} costs ${totalCost}/month. ${comparisonText} Check out the Ultimate Pet Cost Analyzer!`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'My Pet Cost Comparison',
                    text: shareText,
                    url: window.location.href
                }).catch(err => {
                    console.log('Error sharing:', err);
                    alert('Share failed: ' + err.message);
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                const shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}`;
                window.open(shareUrl, '_blank');
            }
        }

        // Get AI advice - now with better question analysis
        function getAIAdvice() {
            const question = aiQuestion.value.trim();
            if (!question) {
                alert('Please enter a question');
                return;
            }
            
            aiResponse.textContent = 'Analyzing your question...';
            
            // Simulate AI response with better question analysis
            setTimeout(() => {
                const petType = petTypeSelect.value;
                const lifestyle = document.querySelector('input[name="lifestyle"]:checked').value;
                const country = document.getElementById('location').value;
                
                // Analyze question for keywords
                let responseKey = 'default';
                const questionLower = question.toLowerCase();
                
                if (questionLower.includes('save') || questionLower.includes('cheap') || questionLower.includes('afford')) {
                    responseKey = 'save money';
                } else if (questionLower.includes('food') || questionLower.includes('diet') || questionLower.includes('feed')) {
                    responseKey = 'food';
                } else if (questionLower.includes('insurance') || questionLower.includes('cover')) {
                    responseKey = 'insurance';
                } else if (questionLower.includes('health') || questionLower.includes('vet') || questionLower.includes('sick')) {
                    responseKey = 'health';
                }
                
                // Get random response for the category
                const possibleResponses = aiResponses[responseKey] || aiResponses['default'];
                const randomResponse = possibleResponses[Math.floor(Math.random() * possibleResponses.length)];
                
                // Personalize the response
                let personalizedResponse = randomResponse;
                if (petType) {
                    personalizedResponse = personalizedResponse.replace(/your pet/g, `your ${petType}`);
                }
                
                if (lifestyle === 'luxury' || lifestyle === 'premium') {
                    personalizedResponse = personalizedResponse.replace(/cost-effective/g, 'premium');
                    personalizedResponse = personalizedResponse.replace(/save money/g, 'get the best value');
                }
                
                aiResponse.textContent = personalizedResponse;
            }, 2000);
        }

        // Generate shareable video
        function generateVideo() {
            generateVideoBtn.disabled = true;
            generateVideoBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
            
            // Simulate video generation (in a real app, this would use a proper video API)
            setTimeout(() => {
                // Create a preview image
                const petType = petTypeSelect.value;
                const totalCost = document.getElementById('total-cost').textContent;
                
                // In a real implementation, you would use a proper video generation API
                // Here we just create a static image preview
                videoPreview.style.backgroundImage = `url('${petImages[petType]}')`;
                videoText.textContent = `My ${petType} costs ${totalCost}/month! 🐾`;
                
                generateVideoBtn.disabled = false;
                generateVideoBtn.innerHTML = '<i class="fas fa-film"></i> Generate Video';
                downloadVideoBtn.style.display = 'inline-block';
            }, 3000);
        }

        // Download video (simulated)
        function downloadVideo() {
            alert('In a real implementation, this would download the generated video. For now, you can screenshot the preview.');
        }

        // Next quiz question
        function nextQuizQuestion() {
            if (currentQuestion === 1 && !quizAnswers.budget) {
                alert('Please select an answer');
                return;
            }
            
            if (currentQuestion === 2 && !quizAnswers.time) {
                alert('Please select an answer');
                return;
            }
            
            if (currentQuestion === 3 && !quizAnswers.type) {
                alert('Please select an answer');
                return;
            }
            
            if (currentQuestion < 3) {
                // Hide current question and show next
                document.querySelector(`.quiz-question:nth-child(${currentQuestion * 2 - 1})`).style.display = 'none';
                document.querySelector(`.quiz-options:nth-child(${currentQuestion * 2})`).style.display = 'none';
                
                currentQuestion++;
                document.querySelector(`.quiz-question:nth-child(${currentQuestion * 2 - 1})`).style.display = 'block';
                document.querySelector(`.quiz-options:nth-child(${currentQuestion * 2})`).style.display = 'flex';
                
                if (currentQuestion === 3) {
                    nextQuestionBtn.textContent = 'See Results';
                }
            } else {
                // Show results
                document.getElementById('quiz-questions').style.display = 'none';
                nextQuestionBtn.style.display = 'none';
                quizResult.style.display = 'block';
                
                // Determine result
                const resultKey = `${quizAnswers.budget}-${quizAnswers.type}`;
                const result = quizResults[resultKey] || quizResults['medium-independent'];
                
                quizPetResult.innerHTML = `
                    <h4 style="font-size: 1.5rem; margin: 10px 0;">${result.pet}</h4>
                    <p>${result.description}</p>
                    <img src="${result.image}" style="width: 100%; max-width: 200px; border-radius: 10px; margin-top: 15px;">
                `;
            }
        }

        // Share quiz result
        function shareQuizResult() {
            const resultText = `According to the Ultimate Pet Cost Analyzer, I should get a ${quizPetResult.querySelector('h4').textContent}! Find out which pet fits you best.`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'My Perfect Pet Quiz Result',
                    text: resultText,
                    url: window.location.href
                }).catch(err => {
                    console.log('Error sharing:', err);
                    alert('Share failed: ' + err.message);
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                const shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(resultText)}`;
                window.open(shareUrl, '_blank');
            }
        }

        // Animate mascot
        function animateMascot(lifestyle) {
            // Different animations based on lifestyle
            const animations = {
                'basic': 'https://cdn.pixabay.com/animation/2022/10/11/03/16/03-16-39-160_512.gif',
                'standard': 'https://cdn.pixabay.com/animation/2022/10/11/03/16/03-16-39-160_512.gif',
                'premium': 'https://cdn.pixabay.com/animation/2022/10/11/03/16/03-16-39-160_512.gif',
                'luxury': 'https://cdn.pixabay.com/animation/2022/10/11/03/16/03-16-39-160_512.gif'
            };
            
            petMascot.style.backgroundImage = `url('${animations[lifestyle] || animations['standard']}')`;
            
            // Bounce animation
            petMascot.style.transform = 'scale(1.2)';
            setTimeout(() => {
                petMascot.style.transform = 'scale(1)';
            }, 300);
        }

        // Chart instance
        let costChart = null;

        // Update or create chart
        function updateChart(costData, country, labels) {
            const ctx = document.getElementById('cost-chart').getContext('2d');
            const currencySymbol = formatCurrency(1, country).charAt(0);
            
            if (costChart) {
                costChart.destroy();
            }
            
            costChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: costData,
                        backgroundColor: [
                            '#6c5ce7',
                            '#00b894',
                            '#fd79a8',
                            '#fdcb6e',
                            '#0984e3',
                            '#a29bfe',
                            '#55efc4'
                        ],
                        borderWidth: 0,
                        hoverOffset: 15
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                padding: 20,
                                usePointStyle: true,
                                pointStyle: 'circle',
                                font: {
                                    family: 'Poppins',
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + currencySymbol + context.raw.toLocaleString();
                                }
                            },
                            bodyFont: {
                                family: 'Poppins',
                                size: 14
                            },
                            titleFont: {
                                family: 'Poppins',
                                size: 16,
                                weight: 'bold'
                            },
                            padding: 12,
                            cornerRadius: 12
                        }
                    },
                    cutout: '60%',
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            });
        }

        // Initialize the app
        function init() {
            addCountryFlags();
            
            // Add first comparison pet by default
            addComparisonPet();
            
            // Check if PWA is installed
            if (window.matchMedia('(display-mode: standalone)').matches) {
                console.log('Running as PWA');
            }
            
            // Register service worker for PWA
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/sw.js').then(registration => {
                        console.log('ServiceWorker registration successful');
                    }, err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
                });
            }
        }

        init();
    </script>
</body>
</html>